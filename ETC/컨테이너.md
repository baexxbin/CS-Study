# 컨테이너

## 컨테이너

### 컨테이너란?

- 컨테이너 이미지는 코드,런타임,시스템 도구,시스템 라이브러리 및 설정과 같은 응용 프로그램을 실행하는데 필요한 모든 것을 포함하는 가볍고 독립적이며 실행 가능한 소프트웨어 패키지이다.
- 컨테이너 이미지는 런타임에 컨테이너가 되고 도커 컨테이너의 경우 도커 엔진에서 실행될 때 이미지가 컨테이너가 된다.
- 리눅스와 윈도우 기반 어플리케이션 모두에서 사용할 수 있는 컨테이너화된 소프트웨어는 인프라에 관계없이 동일하게 항상 동작한다.
- 컨테이너는 소프트웨어를 환경으로부터 격리시키고 균일하게 작동하도록 보장한다.

### 컨테이너과 VN 차이점

![](https://velog.velcdn.com/images/dragonappear/post/dff45d71-b69d-4c8c-9dbf-40c74d5be284/image.png)

- 컨테이너
	- OS 레벨에서의 가상화를 제공한다. 각 컨테이너는 호스트 OS의 커널을 공유하지만, 나머지 소프트웨어 스택은 독립적으로 실행된다
	- 구조: 호스트 OS 위에 컨테이너 런타임(ex: 도커)가 있고, 이 런타임 위에 여러 컨테이너가 실행된다

- 가상머신
  - 하드웨어 레벨에서의 가상화를 제공한다. 각 VM은 전체 운영체제와 필요한 라이브러리 및 응용 프로그램이 포함된 자체적인 가상 환경을 갖는다
  - 구조: 물리적 하드웨어 위에 하이퍼바이저(ex: VMware, Hyper-V)가 있고, 하이퍼바이저 위에 여러개의 VM이 실행된다

#### 주요 차이점

- 크기: 컨테이너는 가상머신보다 가볍고, 빠르게 시작된다
- 성능: 컨테이너는 네이티브 성능에 가깝고, VM은 추가적인 오버헤드가 있다
- 격리: 컨테이너는 OS 커널을 공유하는 반면, VM은 자체적인 가상 환경을 가지므로 더 강력한 격리를 제공한다.
- 이식성: 컨테이너는 응용 프로그램과 모든 종속성을 함께 패키징하기 때문에 다른 컴퓨팅 환경에 더 편리하게 실행시킨다

---

## 도커

### Docker Engine

도커 엔진은 아래와 같은 역할을 수행한다.

#### 1. 호스트에 파일 적재
도커 엔진은 도커 이미지에 정의된 파일을 호스트의 파일 시스템에 적재한다.

#### 2. 파일 시스템 마운트
도커 엔진은 컨테이너마다 호스트 시스템의 파일 시스템을 컨테이너 파일 시스템에 마운트한다.

#### 3. 격리된 파일 시스템 환경
도커 엔진은 각각의 컨테이너에 대해 파일 시스템 네임스페이스를 생성하여 컨테이너마다 독립된 파일 시스템을 가지게 한다.

####  4. 자원 관리
컨테이너의 리소스 제한과 관리를 위해 cgroups 커널 기능을 활용하여 컨테이너를 관리한다.

### Docker Engine 구조

https://velog.velcdn.com/images/dragonappear/post/f2ae5aba-0e2d-4d77-8a4f-2af434f66a83/image.png

#### Docker Daemon

- 도커 엔진의 핵심 구성 요소로, 백그라운드에서 실행되며 도커의 주요 기능을 제공합니다. 
- 도커 데몬은 컨테이너 관리, 이미지 빌드, 네트워크 설정 등의 작업을 처리합니다. 
- 또한 도커 API를 통해 클라이언트와 상호작용하고, 도커 레지스트리에서 이미지를 가져와서 실행할 수 있도록 합니다.
- 도커 데몬은 Dockerfile을 기반으로 이미지를 빌드합니다.

#### Docker CLI

- 사용자와 도커 데몬 사이에서 상호작용하기 위한 명령어 인터페이스입니다. 
- 도커 CLI는 커맨드 라인에서 입력한 명령어를 받아 도커 데몬에 전달하고, 결과를 출력합니다. 
- 사용자는 도커 CLI를 통해 컨테이너 생성, 이미지 빌드, 네트워크 설정 등을 수행할 수 있습니다.

#### Docker Registry

- 도커 레지스트리는 도커 이미지를 저장하고 관리하는 중앙 저장소입니다. 
- 도커 이미지는 컨테이너를 생성하는 데 필요한 파일과 설정 등의 모든 정보를 포함하고 있습니다. 
- 도커 레지스트리는 도커 이미지를 저장하고 공유하기 위한 중앙 저장소로서 도커 허브(Docker Hub)가 가장 유명한 도커 레지스트리입니다. 
- 사용자는 도커 클라이언트를 사용하여 도커 레지스트리에서 이미지를 검색하고 내려받을 수 있습니다.