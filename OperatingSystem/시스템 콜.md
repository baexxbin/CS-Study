시스템 콜을 설명하기 위해서는 운영체제의 사용자 모드와 커널모드를 먼저 알아야한다. 

## 운영체제의 Dual Mode 에 대해 설명해 주세요.

운영체제는 사용자 모드와 커널모드로 이루어져있다. 사용자 모드는 개발자들이 만든 응용 프로그램이나 소프트웨어가 실행되는 모드이다. 운영체제는 응용 프로그램이 하드웨어나 시스템에 접근하는 걸 막고 있다. 그렇지 않으면, 하나의 응용 프로그램이 하드웨어를 모두 점유하는 등의 위험 요소가 있기 때문이다. 이렇게 막아두고, 커널을 통해 운영 체제에서 동작하는 응용 프로그램을 관리하고, 하드웨어와 관련된 작업을 수행한다. 그렇기에 커널 모드는 운영 체제에서 커널이 작업을 수행하는 모드를 말한다. 

## 시스템 콜이, 운영체제에서 어떤 과정으로 실행되는지 설명해 주세요.

프로그램이 시스템 호출을 호출하면 사용자 모드에서 커널 모드로 전환된다. 시스템 콜이란 운영체제에서 제공하는 서비스에 접근하기 위한 인터페이스 역할을 한다. 위에 언급했듯이 응용 프로그램은 직접적으로 시스템이나 하드웨어와 접근이 불가능하다. 그렇기에 시스템 콜을 호출해서 운영체제에 원하는 요청을 수행한다. 예를 들면 실행중인 A 라는 프로그램은 B라는 텍스트 파일을 읽어올 상황이 생길 수 있다. 이때 프로그램은 read() 라는 시스템 콜을 호출한다. 이제 커널 모드로 전환되고 운영체제는 요청한 해당 명령어를 수행한다. 파일을 찾아 읽게 되고 해당 파일을 프로그램에 반환하고 다시 사용자 모드로 전환된다. 이제 다시 프로그램 A를 실행하게 된다.

## 아래는 시스템 콜의 유형과 예시다.

### 프로세스 컨트롤

- 프로세스 생성 및 종료
- 메모리에 로드, 실행 메모리 할당
- 예시)`fork()`, `wait()`, `exec()`, `exit()`

### 파일 관리

- 파일 생성, 파일 삭제
- 열기, 닫기, 읽기, 쓰기 등
- 예시) `open()`, `read()`, `write()`, `close()`

### 디바이스 매니지먼트

- 디바이스 요청 및 해제
- 읽기, 쓰기
- 예시) `read()`, `write()`

### 정보 관리

- 시간 확인, 시간 지정
- 시스템 데이터 확인, 지정
- 예시) `time()`, `gettimeofday()`

### 통신

- 커뮤니케이션 연결 생성 및 삭제
- 메시지 송신, 수신, 상태 정보 전달
- 예시) `pipe()`, `send()`

### 보안

- Permission 획득, 설정
- 예시) `chmod()`, `chown()`

## 서로 다른 시스템 콜을 어떻게 구분할 수 있을까요?

커널은 시스템 콜을 구분하기 위해 기능별로 고유 번호를 할당한다. 그리고 그 번호에 해당하는 제어루틴을 커널 내부에 정의하고 있다가 요청 받은 시스템 콜의 루틴을 호출한다.



<br/>
<br/>
<br/>

> 추가 - [손지민]

### 운영체제

- 컴퓨터 시스템의 자원들을 효율적으로 관리하고, 사용자가 컴퓨터를 편리하고 효과적으로 사용할 수 있도록 환경을 제공하는 여러 프로그램의 모임
  - 좁은 의미의 OS: 커널을 의미하며, 컴퓨터가 켜진 후 항상 메모리에 상주하는 운영 체제의 핵심 부분
  - 넓은 의미의 OS: 커널을 포함해서 메모리에 상주하지 않는 다양한 유틸리티를 모두 포괄하는 개념

<br/>

### 커널
- 운영체제 중 항상 메모리에 올라가 있는 운영체제의 핵심 부분
  - 운영체제와 같이 규모가 큰 프로그램이 모두 메모리에 올라가면 메모리 공간 낭비가 심해짐
  - 운영체제 중 항상 필요한 부분만 메모리에 올려놓고, 그렇지 않은 부분은 필요할 때만 메모리에 올려서 사용함
  - 이때 메모리에 상주하는 운영체제의 부분을 커널이라고 함
- 하드웨어와 응용 프로그램 사이에서 인터페이스를 제공하는 역할을 하고, 컴퓨터 자원들을 관리하는 역할을 함
  - 즉, 인터페이스로써 응용 프로그램 수행에 필요한 여러 서비스를 제공하고, 여러 하드웨어(CPU, 메모리) 등의 자원을 관리하는 역할을 함
- 커널은 항상 자원들을 바라보고 있기 때문에 사용자와의 상호작용은 지원하지 않음
  - 사용자와의 직접적인 상호작용을 위해 프로그램을 제공하는데, 대표적으로 쉘(Shell) 등이 있음 
  - 사용자는 이 쉘을 통해 커널에게 명령을 내릴 수 있음

>  쉘(shell): 사용자가 컴퓨터에게 전달하는 명령을 해석하는 프로그램으로, 커널과 사용자 간의 다리 역할을 수행함

<br/>

### CPU 작동 모드(운영체제의 Dual Mode)

- CPU는 사용자 애플리케이션이 시스템을 손상시키는 것을 방지하기 위해 2가지 모드를 제공함
  - 응용 프로그램이나 소프트웨어가 직접 하드웨어나 시스템에 접근하는 것을 막기 위해(시스템 보호)
  - 직접 접근하면 위험 요소가 있음(하드웨어 모두 점유, 자원 접근 등)
- 사용자 모드
  - 사용자가 접근할 수 있는 영역을 제한적으로 두고, 프로그램의 자원에 함부로 침범하지 못하는 모드
  - 시스템 데이터에 제한된 접근만 허용되며, 하드웨어를 직접 접근할 수 없음
  - 접근을 위해서는 시스템 콜(`System Call`)을 사용해야 함
- 커널 모드
  - 운영체제가 CPU의 제어권을 가지고 운영 체제 코드를 실행하는 모드
  - 시스템의 모든 자원(드라이버, 메모리, CPU 등)에 접근할 수 있고, 모든 CPU 명령을 실행할 수 있음
- 응용 프로그램은 사용자 모드에서 실행되다가 시스템 자원을 사용해야 할 때, 시스템 콜을 호출하여 커널모드로 전환하고 작업을 수행한 뒤에는 다시 사용자 모드로 전환함 

<br/>

### 시스템 콜(System Call = 시스템 호출)
- 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스(`사용자와 커널 사이의 통로`)
  - 사용자가 일반적으로 사용하는 응용 프로그램은 유저 레벨의 함수 만으로는 기능을 구현하기 힘들기 때문에, 커널의 도움을 받아야 함
  - 운영체제는 하드웨어를 직접 관리하고, 응용 프로그램은 운영체제가 제공하는 인터페이스를 통해서만 자원을 사용할 수 있음
- 운영체제에 의해 실행될 동작을 사용자 프로세스가 요청할 수 있게 하는 것
  - 즉, 시스템 콜은 커널 영역의 기능을 사용자 모드가 사용할 수 있도록, 필요한 기능을 수행할 수 있게 해줌
  - 보통 직접적으로 시스템 콜을 사용하기 보다는 API를 통해 사용하게 됨

<br/>

**시스템 콜 처리 과정**
1. 사용자 프로세스가 시스템 콜 호출(커널 모드 진입)
2. 커널은 요청 받은 시스템 콜에 대응하는 고유 번호를 확인하고, 번호에 맞는 서비스 루틴을 호출함
   - 커널은 내부적으로 시스템 콜을 구분하기 위해 기능별로 고유 번호를 할당하고, 그 번호에 해당하는 제어 루틴을 정의해둠
4. 커널은 서비스 루틴을 처리하고, 사용자 모드로 전환함
