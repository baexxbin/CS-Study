# 연속 메모리 할당

### Swapping(스와핑)

메모리에서 사용되지 않는 일부 프로세스를 보조기억장치로 내보내고 실행할 프로세스를 메모리로 들여보내는 메모리 관리 기법
<p align="center">
<img src="https://github.com/jmxx219/CS-Study/assets/64017307/f230dcac-2d45-4767-9061-430ee2d500fb" width="400" height="200"/>

- 스왑 영역(swap space) : 프로세스들이 쫓겨나는 보조기억장치의 일부 영역
- 스왑 아웃(swap-out) : 현재 실행되지 않는 프로세스가 메모리에서 스왑 영역으로 옮겨지는 것
- 스왑 인(swap-in) : 스왑 영역에 있던 프로세스가 다시 메모리로 옮겨오는 것

스왑아웃 된 프로레스가 다시 스왑 인될 때는 스왑 아웃되기 전의 물리주소와 다른 주소에 적재 될 수 있음

스와핑을 이용하면 프로세스들이 요구하는 메모리 주소 공간의 크기가 실제 메모리 크기보다 큰 경우에도 프로세스들을 동시 실행 할 수 있다.
  
</br>

## 메모리 할당
비어있는 메모리 공간에 프로세스를 연속적으로 할당하는 방식, 총 3가지 방법이 있다.

1. 최초 적합
2. 최적 적합
3. 최악 적합


</br>

### 최초 적합(First fit)
운영체제가 메모리 내의 빈 공간을 순서대로 검색하다 적재할 수 있는 공간을 발견하면 그 공간에 프로세스를 배치하는 방식
- 검색을 최소화 할 수 있다
- 시간적 측면에서 효율적이다
- 빠른 할당이 가능하다

Ex) 
빈공간A -> 빈공간B -> 빈공간C -> 빈공간D </br>
운영체제가 이 순서대로 빈 공간을 발견했다면, 빈공간A에 먼저 할당하는 방식

</br>

### 최적 적합(Best fit)
운영제체가 빈 공간을 모두 검색해 본 후, 프로세스가 적재될 수 있는 공간중에서 가장 작은(가장 크기가 비슷한)공간에 프로세스를 배치하는 방법
- 공간에 대한 목록이 그 공간의 크기 순서대로 정렬되어 있지 않다면, 최적인 곳을 찾기 위해 전체를 검색해야한다. = 시간적 오버헤드를 발생한다
- 외부 단편화를 초래, 메모리 집약 횟수를 증가시킨다
- 공간적인 측면에서 효율적이다

Ex) 
적재할 프로세스가 18Mb 일떄, </br>
| 빈공간A(50Mb) | 빈공간B(30Mb)| 빈공간C(20Mb)| 빈공간(70Mb)D | </br>
운영체제가 빈공간C에 적재한다 </br>

</br>

### 최악 적합(Worst fit)
운영체제가 빈 공간을 모두 검색 해 본 후, 가장 큰 공간에 프로세스를 배치하는 방법
- 최적 적합과 마찬가지로, 크기 순서대로 정렬되어 있지 않다면 전체를 검색한다. = 오버헤드 발생
- 최악적합은 가장 큰 공백에 배치하는 전략이므로, 큰 가용 공간에 프로그램을 할당하기 때문에 남은 공간도 여전히 크므로 다른 프로그램이 실행이 가능하다.

Ex) 
적재할 프로세스가 18Mb 일떄, </br>
| 빈공간A(50Mb) | 빈공간B(30Mb)| 빈공간C(20Mb)| 빈공간(70Mb)D | </br>
운영체제가 빈공간D에 적재한다 </br>

</br>

> 성능 : 최초, 최적 모두 시간 및 공간 효율성 측면에서 최악보다 좋다.

</br>


## 외부 단편화
프로세스를 할당하기 어려울 만큼 작은 메모리 공간들로 인해 메모리가 낭비되는 현상

<p align="center">
<img src="https://github.com/jmxx219/CS-Study/assets/64017307/a1bb278c-e948-4c2f-8193-c5ca7fe40227" width="400" height="200"/>

메모리가 할당되고 해제되는 작업이 반복적으로 일어날 때, 할당된 메모리 사이 중간중간 마다 사용하지 않는 작은 공간이 생긴다. 
작은 메모리들의 합인 총 메모리 공간은 충분하지만, 실제 할당 가능한 공간은 부족하여 할당할 수 없는 상황

## 외부 단편화 해결 방법
    
### 페이징 기법 (Paging)

<p align="center">
<img src="https://github.com/jmxx219/CS-Study/assets/64017307/d31cceb0-1cb6-4ec8-af2c-bf3143ba4192" width="500" height="200"/>

페이징은 프로세스의 논리 주소 공간을 페이지라는 일정한 단위로 자르고, 메모리 물리 주소 공간을 프레임 이라는 페이지와 동일한 크기의 일정한 단위로 자른 후 페이지를 프레임에 할당하는 가상 메모리 관리 기법

- 페이지 : 가장 메모리를 같은 크기의 블록으로 나눈 것
- 프레임 : 페이지와 같은 크기의 블록으로 나눈 것

특징
- 외부 단편화 문제 해결 가능
- 페이지 매핑 과정이 많아져 효율이 떨어진다
- 내부 단편화가 발생함
